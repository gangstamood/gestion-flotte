THEMES = {
    "Sombre Classique": {
        "bg": "linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%)",
        "sidebar_bg": "linear-gradient(180deg, #1a1a2e 0%, #0f0f1a 100%)",
        "card_bg": "linear-gradient(145deg, #1e1e32 0%, #252542 100%)",
        "card_border": "rgba(255,255,255,0.05)",
        "card_shadow": "0 4px 20px rgba(0,0,0,0.3)",
        "card_hover_shadow": "0 8px 30px rgba(99, 102, 241, 0.15)",
        "input_bg": "#1e1e32",
        "input_border": "rgba(255,255,255,0.1)",
        "btn_bg": "linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",
        "btn_shadow": "0 4px 15px rgba(99, 102, 241, 0.3)",
        "btn_hover_shadow": "0 6px 20px rgba(99, 102, 241, 0.4)",
        "dl_btn_bg": "linear-gradient(135deg, #10b981 0%, #059669 100%)",
        "dl_btn_shadow": "0 4px 15px rgba(16, 185, 129, 0.3)",
        "h1_color": "#ffffff",
        "h23_color": "#e0e0e0",
        "metric_label": "#a0a0a0",
        "metric_value": "#ffffff",
        "label_color": "#c0c0c0",
        "text_color": "#c0c0c0",
        "strong_color": "#e0e0e0",
        "intro_color": "#808080",
        "sidebar_title": "#ffffff",
        "hr_color": "rgba(255,255,255,0.05)",
        "expander_bg": "#1e1e32",
        "expander_border": "rgba(255,255,255,0.05)",
        "expander_color": "#e0e0e0",
        "df_bg": "#1e1e32",
        "scrollbar_track": "#1a1a2e",
        "scrollbar_thumb": "#3a3a5e",
        "hamburger_bg": "#1a1a2e",
        "hamburger_hover": "#2a2a4e",
    },
    "Moderne Clair": {
        "bg": "linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 50%, #f0f2f5 100%)",
        "sidebar_bg": "linear-gradient(180deg, #ffffff 0%, #f8f9fc 100%)",
        "card_bg": "#ffffff",
        "card_border": "rgba(0,0,0,0.06)",
        "card_shadow": "0 2px 12px rgba(0,0,0,0.06)",
        "card_hover_shadow": "0 6px 24px rgba(99, 102, 241, 0.12)",
        "input_bg": "#ffffff",
        "input_border": "rgba(0,0,0,0.1)",
        "btn_bg": "linear-gradient(135deg, #6366f1 0%, #818cf8 100%)",
        "btn_shadow": "0 2px 8px rgba(99, 102, 241, 0.25)",
        "btn_hover_shadow": "0 4px 16px rgba(99, 102, 241, 0.35)",
        "dl_btn_bg": "linear-gradient(135deg, #10b981 0%, #34d399 100%)",
        "dl_btn_shadow": "0 2px 8px rgba(16, 185, 129, 0.25)",
        "h1_color": "#1a1a2e",
        "h23_color": "#2d2d44",
        "metric_label": "#6b7280",
        "metric_value": "#1a1a2e",
        "label_color": "#4b5563",
        "text_color": "#4b5563",
        "strong_color": "#1f2937",
        "intro_color": "#9ca3af",
        "sidebar_title": "#1a1a2e",
        "hr_color": "rgba(0,0,0,0.06)",
        "expander_bg": "#ffffff",
        "expander_border": "rgba(0,0,0,0.06)",
        "expander_color": "#2d2d44",
        "df_bg": "#ffffff",
        "scrollbar_track": "#f0f0f0",
        "scrollbar_thumb": "#c0c0c0",
        "hamburger_bg": "#ffffff",
        "hamburger_hover": "#f0f0f5",
    },
    "Bleu Nuit": {
        "bg": "linear-gradient(135deg, #0a1628 0%, #0f2440 50%, #132d4f 100%)",
        "sidebar_bg": "linear-gradient(180deg, #0d1f36 0%, #091726 100%)",
        "card_bg": "linear-gradient(145deg, #112240 0%, #1a3355 100%)",
        "card_border": "rgba(100,180,255,0.08)",
        "card_shadow": "0 4px 20px rgba(0,0,0,0.4)",
        "card_hover_shadow": "0 8px 30px rgba(59, 130, 246, 0.2)",
        "input_bg": "#112240",
        "input_border": "rgba(100,180,255,0.12)",
        "btn_bg": "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",
        "btn_shadow": "0 4px 15px rgba(59, 130, 246, 0.3)",
        "btn_hover_shadow": "0 6px 20px rgba(59, 130, 246, 0.45)",
        "dl_btn_bg": "linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)",
        "dl_btn_shadow": "0 4px 15px rgba(14, 165, 233, 0.3)",
        "h1_color": "#e0f0ff",
        "h23_color": "#c0d8f0",
        "metric_label": "#7ba3c9",
        "metric_value": "#e0f0ff",
        "label_color": "#93b4d4",
        "text_color": "#93b4d4",
        "strong_color": "#c0d8f0",
        "intro_color": "#5a8ab5",
        "sidebar_title": "#e0f0ff",
        "hr_color": "rgba(100,180,255,0.08)",
        "expander_bg": "#112240",
        "expander_border": "rgba(100,180,255,0.08)",
        "expander_color": "#c0d8f0",
        "df_bg": "#112240",
        "scrollbar_track": "#0d1f36",
        "scrollbar_thumb": "#1e3a5f",
        "hamburger_bg": "#0d1f36",
        "hamburger_hover": "#1a3355",
    },
    "Vert Nature": {
        "bg": "linear-gradient(135deg, #0a1a0f 0%, #0f2818 50%, #132d1a 100%)",
        "sidebar_bg": "linear-gradient(180deg, #0f2018 0%, #0a150e 100%)",
        "card_bg": "linear-gradient(145deg, #14301c 0%, #1a4025 100%)",
        "card_border": "rgba(34,197,94,0.1)",
        "card_shadow": "0 4px 20px rgba(0,0,0,0.35)",
        "card_hover_shadow": "0 8px 30px rgba(34,197,94,0.15)",
        "input_bg": "#14301c",
        "input_border": "rgba(34,197,94,0.15)",
        "btn_bg": "linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",
        "btn_shadow": "0 4px 15px rgba(34,197,94,0.3)",
        "btn_hover_shadow": "0 6px 20px rgba(34,197,94,0.45)",
        "dl_btn_bg": "linear-gradient(135deg, #a3e635 0%, #84cc16 100%)",
        "dl_btn_shadow": "0 4px 15px rgba(163,230,53,0.3)",
        "h1_color": "#e0ffe8",
        "h23_color": "#b8e6c4",
        "metric_label": "#6fad7e",
        "metric_value": "#e0ffe8",
        "label_color": "#8cc49a",
        "text_color": "#8cc49a",
        "strong_color": "#b8e6c4",
        "intro_color": "#5a9468",
        "sidebar_title": "#e0ffe8",
        "hr_color": "rgba(34,197,94,0.08)",
        "expander_bg": "#14301c",
        "expander_border": "rgba(34,197,94,0.1)",
        "expander_color": "#b8e6c4",
        "df_bg": "#14301c",
        "scrollbar_track": "#0f2018",
        "scrollbar_thumb": "#1e5030",
        "hamburger_bg": "#0f2018",
        "hamburger_hover": "#1a4025",
    },
}


def get_css(t):
    return f"""
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    .stApp {{ background: {t['bg']}; font-family: 'Inter', sans-serif; }}
    #MainMenu {{visibility: hidden;}}
    footer {{visibility: hidden;}}
    header[data-testid="stHeader"] {{background: transparent !important; pointer-events: none;}}
    [data-testid="stToolbar"] {{display: none !important;}}
    [data-testid="stDecoration"] {{display: none !important;}}
    [data-testid="stSidebar"] {{ background: {t['sidebar_bg']}; border-right: 1px solid {t['card_border']}; }}
    .main .block-container {{ padding: 2rem 3rem; max-width: 1400px; }}
    h1 {{ color: {t['h1_color']} !important; font-weight: 700 !important; font-size: 2rem !important; margin-bottom: 0.5rem !important; }}
    h2, h3 {{ color: {t['h23_color']} !important; font-weight: 600 !important; }}
    [data-testid="stMetric"] {{ background: {t['card_bg']}; border: 1px solid {t['card_border']}; border-radius: 16px; padding: 1.5rem; box-shadow: {t['card_shadow']}; }}
    [data-testid="stMetric"]:hover {{ transform: translateY(-2px); box-shadow: {t['card_hover_shadow']}; }}
    [data-testid="stMetric"] label {{ color: {t['metric_label']} !important; font-size: 0.85rem !important; text-transform: uppercase; letter-spacing: 0.5px; }}
    [data-testid="stMetric"] [data-testid="stMetricValue"] {{ color: {t['metric_value']} !important; font-size: 2.5rem !important; font-weight: 700 !important; }}
    .stTextInput > div > div > input, .stSelectbox > div > div, .stTextArea > div > div > textarea, .stNumberInput > div > div > input {{ background-color: {t['input_bg']} !important; border: 1px solid {t['input_border']} !important; border-radius: 10px !important; color: {t['h1_color']} !important; }}
    .stTextInput > label, .stSelectbox > label, .stTextArea > label, .stNumberInput > label, .stDateInput > label, .stTimeInput > label {{ color: {t['label_color']} !important; font-weight: 500 !important; }}
    .stButton > button {{ background: {t['btn_bg']}; color: white; border: none; border-radius: 10px; padding: 0.6rem 1.5rem; font-weight: 600; box-shadow: {t['btn_shadow']}; }}
    .stButton > button:hover {{ transform: translateY(-1px); box-shadow: {t['btn_hover_shadow']}; }}
    .stDownloadButton > button {{ background: {t['dl_btn_bg']}; box-shadow: {t['dl_btn_shadow']}; }}
    [data-testid="stForm"] {{ background: {t['card_bg']}; border: 1px solid {t['card_border']}; border-radius: 16px; padding: 1.5rem; }}
    .stDataFrame {{ background: {t['df_bg']}; border-radius: 12px; border: 1px solid {t['card_border']}; }}
    .streamlit-expanderHeader {{ background: {t['expander_bg']} !important; border: 1px solid {t['expander_border']} !important; border-radius: 10px !important; color: {t['expander_color']} !important; }}
    hr {{ border-color: {t['hr_color']} !important; margin: 2rem 0 !important; }}
    p, .stText, .stMarkdown {{ color: {t['text_color']}; }}
    strong {{ color: {t['strong_color']}; }}
    .page-intro {{ color: {t['intro_color']}; font-size: 0.95rem; margin-bottom: 2rem; }}
    .sidebar-title {{ color: {t['sidebar_title']}; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }}
    /* Sidebar nav buttons */
    [data-testid="stSidebar"] .stButton > button {{
        background: transparent !important;
        color: {t['text_color']} !important;
        border: none !important;
        border-radius: 8px !important;
        padding: 0.5rem 0.75rem !important;
        font-size: 0.88rem !important;
        font-weight: 500 !important;
        text-align: left !important;
        justify-content: flex-start !important;
        box-shadow: none !important;
        transition: background 0.2s !important;
    }}
    [data-testid="stSidebar"] .stButton > button:hover {{
        background: {t['input_bg']} !important;
        transform: none !important;
        box-shadow: none !important;
    }}
    [data-testid="stSidebar"] .stButton > button[kind="primary"] {{
        background: {t['btn_bg']} !important;
        color: white !important;
        font-weight: 600 !important;
    }}
    [data-testid="stSidebar"] .stButton > button[kind="primary"]:hover {{
        background: {t['btn_bg']} !important;
        opacity: 0.9;
    }}
    [data-testid="stSidebar"] .stExpander {{
        border: none !important;
        background: transparent !important;
        margin-bottom: 0.25rem;
    }}
    [data-testid="stSidebar"] .streamlit-expanderHeader {{
        background: transparent !important;
        border: none !important;
        font-weight: 600 !important;
        font-size: 0.95rem !important;
        padding: 0.5rem 0.25rem !important;
        color: {t['h23_color']} !important;
    }}
    [data-testid="stSidebar"] .streamlit-expanderContent {{
        padding: 0 0 0 0.5rem !important;
        border: none !important;
    }}
    ::-webkit-scrollbar {{ width: 8px; height: 8px; }}
    ::-webkit-scrollbar-track {{ background: {t['scrollbar_track']}; }}
    ::-webkit-scrollbar-thumb {{ background: {t['scrollbar_thumb']}; border-radius: 4px; }}

    /* ===== RESPONSIVE MOBILE ===== */
    @media (max-width: 768px) {{
        .main .block-container {{ padding: 1rem 0.75rem; }}
        h1 {{ font-size: 1.4rem !important; }}
        h2, h3 {{ font-size: 1.1rem !important; }}
        [data-testid="stMetric"] {{ padding: 1rem; border-radius: 12px; }}
        [data-testid="stMetric"] [data-testid="stMetricValue"] {{ font-size: 1.8rem !important; }}
        [data-testid="stMetric"] label {{ font-size: 0.75rem !important; }}
        .stButton > button {{ padding: 0.5rem 1rem; font-size: 0.85rem; border-radius: 8px; }}
        [data-testid="stForm"] {{ padding: 1rem; border-radius: 12px; }}
        [data-testid="stSidebar"] {{ width: 85vw !important; max-width: 300px; }}
        .sidebar-title {{ font-size: 1.2rem; }}
        .page-intro {{ font-size: 0.85rem; margin-bottom: 1rem; }}
        hr {{ margin: 1rem 0 !important; }}
    }}
    @media (max-width: 480px) {{
        .main .block-container {{ padding: 0.75rem 0.5rem; }}
        h1 {{ font-size: 1.2rem !important; }}
        [data-testid="stMetric"] {{ padding: 0.75rem; }}
        [data-testid="stMetric"] [data-testid="stMetricValue"] {{ font-size: 1.5rem !important; }}
    }}
</style>
"""
